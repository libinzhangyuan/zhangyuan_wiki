[è¿”å›](/ai-pic/index)

å¦‚æœä½ æƒ³åœ¨ **Stable Diffusion** ä¸­åŸºäº `"(professor:1.3), Ghibli style, black and white"` è¿™æ ·çš„æç¤ºè¯ç”Ÿæˆ **å¤šæ ·åŒ–** çš„å›¾ç‰‡ï¼ŒåŒæ—¶ **å¢åŠ éšæœºæ€§**ï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š  

---

## **1. å®Œå…¨éšæœºï¼ˆä¸å›ºå®š `seed`ï¼‰**
**é»˜è®¤æƒ…å†µä¸‹**ï¼ŒStable Diffusion æ¯æ¬¡è°ƒç”¨éƒ½ä¼šç”Ÿæˆä¸åŒçš„å›¾ç‰‡ï¼ˆå› ä¸º `seed` æ˜¯éšæœºçš„ï¼‰ã€‚  
### **Ruby ç¤ºä¾‹ï¼ˆä½¿ç”¨ WebUI APIï¼‰**
```ruby
require 'httparty'

API_URL = "http://127.0.0.1:7860/sdapi/v1/txt2img"

4.times do |i|
  response = HTTParty.post(
    API_URL,
    headers: { 'Content-Type' => 'application/json' },
    body: {
      prompt: "(professor:1.3), Ghibli style, black and white, monochrome, --no color",
      negative_prompt: "colorful, blurry, lowres, bad anatomy",
      width: 300,
      height: 400,
      steps: 20,
      sampler_name: "Euler a",
      cfg_scale: 7,
      seed: -1,  # -1 è¡¨ç¤ºéšæœºç§å­
    }.to_json
  )

  image_data = response.parsed_response["images"][0]
  File.open("professor_#{i + 1}.png", "wb") { |f| f.write(Base64.decode64(image_data)) }
end
```
**æ•ˆæœ**ï¼š  
- æ¯æ¬¡ç”Ÿæˆçš„å›¾ç‰‡ **æ„å›¾ã€å§¿åŠ¿ã€èƒŒæ™¯å®Œå…¨ä¸åŒ**ï¼ˆä½†é£æ ¼ä¸€è‡´ï¼‰ã€‚  
- ç¤ºä¾‹å¯èƒ½åŒ…æ‹¬ï¼š  
  - æ•™æˆåœ¨å›¾ä¹¦é¦†  
  - æ•™æˆåœ¨æ£®æ—é‡Œç ”ç©¶é­”æ³•ä¹¦  
  - æ•™æˆä¹˜åé£è¡Œå™¨  
  - æ•™æˆå’Œä¸€åªçŒ«å½¢ç²¾çµ  

---

## **2. å¯æ§éšæœºï¼ˆè°ƒæ•´éƒ¨åˆ†å‚æ•°ï¼‰**
å¦‚æœå¸Œæœ› **éƒ¨åˆ†å¯æ§ï¼Œéƒ¨åˆ†éšæœº**ï¼Œå¯ä»¥ï¼š
### **(1) å›ºå®šéƒ¨åˆ†å…ƒç´ ï¼ŒéšæœºåŒ–å…¶ä»–éƒ¨åˆ†**
```ruby
prompt_base = "(professor:1.3), Ghibli style, black and white, monochrome, --no color"
random_scenes = ["in a library", "with a flying book", "teaching a small dragon", "in a steampunk laboratory"]

4.times do |i|
  full_prompt = "#{prompt_base}, #{random_scenes.sample}"  # éšæœºé€‰ä¸€ä¸ªåœºæ™¯
  # å…¶ä½™ä»£ç åŒä¸Š...
end
```
**æ•ˆæœ**ï¼š  
- æ•™æˆå½¢è±¡ä¿æŒç¨³å®šï¼Œä½† **åœºæ™¯éšæœºå˜åŒ–**ã€‚  

### **(2) è°ƒæ•´ `cfg_scale` å½±å“éšæœºæ€§**
- `cfg_scale`ï¼ˆæç¤ºè¯ç›¸å…³æ€§ï¼Œé»˜è®¤ 7ï¼‰ï¼š
  - **è¾ƒä½å€¼ï¼ˆ5~7ï¼‰** â†’ æ¨¡å‹æ›´è‡ªç”±ï¼Œå¯èƒ½åç¦»æç¤ºè¯ã€‚  
  - **è¾ƒé«˜å€¼ï¼ˆ8~12ï¼‰** â†’ æ›´ä¸¥æ ¼éµå¾ªæç¤ºè¯ï¼Œä½†å¯èƒ½å¤±å»åˆ›æ„ã€‚  
```ruby
body: {
  prompt: "(professor:1.3), Ghibli style, black and white",
  cfg_scale: 6,  # è®©æ¨¡å‹æ›´è‡ªç”±å‘æŒ¥
  seed: -1,
  # ...
}
```

---

## **3. æç«¯éšæœºï¼ˆè®© AI è‡ªç”±å‘æŒ¥ï¼‰**
å¦‚æœæƒ³ **æœ€å¤§åŒ–éšæœºæ€§**ï¼Œå¯ä»¥ï¼š
### **(1) å‡å°‘æç¤ºè¯çº¦æŸ**
```ruby
prompt = "a professor, Ghibli style, black and white, --no color"
```
**æ•ˆæœ**ï¼š  
- å¯èƒ½ç”Ÿæˆ **å¹´è½»æ•™æˆã€å¥³æ•™æˆã€åŠ¨ç‰©æ•™æˆ** ç­‰å˜ä½“ã€‚  

### **(2) ä½¿ç”¨ `Dynamic Prompts` æ’ä»¶ï¼ˆWebUIï¼‰**
å¦‚æœä½ ç”¨ **AUTOMATIC1111 WebUI**ï¼Œå¯ä»¥å®‰è£… `Dynamic Prompts` æ’ä»¶ï¼Œç”¨ `{ }` éšæœºé€‰æ‹©ï¼š  
```
a {old|wise|eccentric} professor, {in a library|on a flying island}, Ghibli style, black and white
```

**Ruby æ¨¡æ‹Ÿç‰ˆ**ï¼š
```ruby
adjectives = ["wise", "eccentric", "kind", "mysterious"]
scenes = ["in a library", "in a forest", "on a flying machine"]

4.times do |i|
  prompt = "a #{adjectives.sample} professor, #{scenes.sample}, Ghibli style, black and white"
  # å‘é€åˆ° API...
end
```

---

## **4. ç”Ÿæˆç¤ºä¾‹ï¼ˆ4 ç§éšæœºç»“æœï¼‰**
```
| **ç”Ÿæˆæ¬¡æ•°** | **å¯èƒ½ç”Ÿæˆçš„å›¾ç‰‡æè¿°** |
|-------------|-----------------------|
| 1 | ç™½å‘æ•™æˆåœ¨å›¾ä¹¦é¦†ï¼Œä¹¦æœ¬æ¼‚æµ®åœ¨ç©ºä¸­ |
| 2 | æˆ´å¤§çœ¼é•œçš„æ•™æˆéª‘ç€çŒ«å¤´é¹°é£è¡Œ |
| 3 | æ•™æˆåœ¨è’¸æ±½æœ‹å…‹å®éªŒå®¤è°ƒé…å‘å…‰è¯å‰‚ |
| 4 | æ•™æˆå’Œä¸€åªä¼šè¯´è¯çš„é’è›™åœ¨æ ‘ä¸‹è®¨è®º |
```

## **5. å¦‚ä½•æ§åˆ¶éšæœºæ€§ï¼Ÿ**
```
| **æ–¹æ³•**               | **éšæœºæ€§** | **é€‚ç”¨åœºæ™¯**               |
|-----------------------|-----------|---------------------------|
| **ä¸å›ºå®š `seed`**      | ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ | å®Œå…¨éšæœºï¼Œé€‚åˆåˆ›æ„æ¢ç´¢     |
| **å›ºå®š `seed`**        | ğŸŒŸ         | å®Œå…¨ä¸€è‡´ï¼Œé€‚åˆè°ƒè¯•         |
| **éƒ¨åˆ†éšæœºï¼ˆå¦‚åœºæ™¯ï¼‰** | ğŸŒŸğŸŒŸğŸŒŸ      | å¹³è¡¡åˆ›æ„ä¸ä¸€è‡´æ€§           |
| **è°ƒæ•´ `cfg_scale`**   | ğŸŒŸğŸŒŸ~ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ | é€šè¿‡æç¤ºè¯çº¦æŸæ§åˆ¶è‡ªç”±åº¦   |
```

## **6. æœ€ç»ˆå»ºè®®**
```
- **æƒ³è¦å®Œå…¨éšæœº** â†’ ä¸å›ºå®š `seed`ï¼Œå‡å°‘æç¤ºè¯ç»†èŠ‚ã€‚  
- **æƒ³è¦å¯æ§éšæœº** â†’ å›ºå®šéƒ¨åˆ†å…ƒç´ ï¼ˆå¦‚é£æ ¼ï¼‰ï¼ŒéšæœºåŒ–å…¶ä»–ï¼ˆå¦‚åœºæ™¯ï¼‰ã€‚  
- **æç«¯åˆ›æ„** â†’ ç»“åˆ `Dynamic Prompts` æˆ– `{A|B|C}` è¯­æ³•ã€‚  
```
è¿™æ ·å°±èƒ½åœ¨ **å‰åœåŠ›é»‘ç™½é£æ ¼** çš„æ¡†æ¶ä¸‹ï¼Œç”Ÿæˆä¸°å¯Œå¤šæ ·çš„æ•™æˆå½¢è±¡ï¼ ğŸ¨