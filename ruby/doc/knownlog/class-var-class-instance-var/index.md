在 Ruby 中，类实例变量和类变量是两种不同的变量类型，它们的作用域和用途有所不同。以下是它们的对比：

### 1. 类实例变量 (`@variable`)
- **定义**: 类实例变量是以 `@` 开头的变量，定义在类级别（即在类方法中或直接在类定义中）。
- **作用域**: 类实例变量属于类对象本身，而不是类的实例。每个类对象（即类本身）都有自己的类实例变量。
- **访问**: 只能在类方法中访问，不能在实例方法中直接访问。
- **继承**: 子类不会继承父类的类实例变量。

```ruby
class MyClass
  @class_instance_var = "类实例变量"

  def self.print_class_instance_var
    puts @class_instance_var
  end
end

MyClass.print_class_instance_var  # 输出: 类实例变量
```

### 2. 类变量 (`@@variable`)
- **定义**: 类变量是以 `@@` 开头的变量，定义在类级别。
- **作用域**: 类变量属于整个类层次结构，包括类本身和所有子类。所有实例共享同一个类变量。
- **访问**: 可以在类方法和实例方法中访问。
- **继承**: 子类会继承父类的类变量，并且子类和父类共享同一个类变量。

```ruby
class MyClass
  @@class_var = "类变量"

  def self.print_class_var
    puts @@class_var
  end

  def print_class_var
    puts @@class_var
  end
end

class SubClass < MyClass
end

MyClass.print_class_var  # 输出: 类变量
SubClass.print_class_var  # 输出: 类变量

obj = MyClass.new
obj.print_class_var  # 输出: 类变量
```

### 对比总结

```
| 特性               | 类实例变量 (`@variable`) | 类变量 (`@@variable`) |
|--------------------|--------------------------|------------------------|
| **定义方式**       | `@` 开头                 | `@@` 开头              |
| **作用域**         | 类对象本身               | 类层次结构（类及其子类）|
| **访问权限**       | 只能在类方法中访问       | 类方法和实例方法均可访问|
| **继承**           | 子类不继承               | 子类继承并共享         |
| **共享性**         | 不共享                   | 共享                   |
```

### 使用场景
- **类实例变量**: 当你需要存储与类对象本身相关的数据，并且不希望这些数据被子类继承或共享时，使用类实例变量。
- **类变量**: 当你需要在整个类层次结构中共享数据时，使用类变量。

### 注意事项
- 类变量在继承时可能会导致意外的共享状态，因此在使用时需要谨慎。
- 类实例变量通常用于存储与类对象相关的元数据或配置信息。